<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOP Configurator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <h1>SOP Configurator</h1>

    <div class="container">
        <!-- *** Save/Load Controls *** -->
        <div class="section save-load-controls">
            <h2>Configuration</h2>
            <button id="save-config-json-btn">Save Config (JSON)</button>
            <button id="save-config-csv-btn">Save Config (CSV)</button>
            <label for="load-config-input" class="button-label">Load Config (JSON)</label>
            <input type="file" id="load-config-input" accept=".json" style="display: none;">
        </div>

        <!-- SOP Header Section -->
        <div class="section sop-header">
            <h2>SOP Details</h2>
            <div>
                <label for="sop-name">SOP Name:</label>
                <input type="text" id="sop-name" value="New Construction Interior - Wainscot - Bead-Board Painting">
            </div>
            <div>
                <label for="sop-description">SOP Description:</label>
                <textarea id="sop-description" rows="3">This specification covers the painting of factory primed bead-board wainscote in new construction interior settings, including preparation and finishing.</textarea>
            </div>
        </div>

        <!-- Global Factor Management -->
        <div class="section">
            <h2>Manage Global Factors (Base Settings)</h2>
            <div id="global-factor-list">
                <!-- Global factors list for editing -->
            </div>
            <button id="show-add-factor-form-btn">+ Add New Factor</button>
            <div id="add-factor-form" class="add-factor-form" style="display: none;">
                <h4>New Factor Details</h4>
                <input type="text" id="new-factor-name" placeholder="Factor Name">
                <input type="text" id="new-factor-range" placeholder="Multiplier Range (e.g., 0.7-0.9)">
                <button id="add-factor-btn">Add Factor</button>
                <button id="cancel-add-factor-btn">Cancel</button>
            </div>
        </div>

        <!-- Task Management & Configuration -->
        <div class="section">
            <h2>Manage Tasks & Task-Specific Factors</h2>
            <div id="task-list">
                <!-- NEW STRUCTURE WILL BE GENERATED HERE BY JS -->
                <!-- Example structure for ONE task (generated by JS): -->
                <div class="task-item" id="task-item-T001" data-task-id="T001">
                    <div class="task-main-controls">
                        <!-- Checkbox, Name Input, Buttons -->
                    </div>
                    <div class="task-details-grid">
                        <!-- Skill, Materials, Affecting, Description (Rate removed) -->
                    </div>

                    <!-- *** NEW: Application Methods Section *** -->
                    <div class="task-methods-section">
                        <h4>Application Methods & Rates</h4>
                        <div class="task-methods-list" id="methods-list-T001">
                            <!-- Method rows generated here -->
                            <!-- Example Method Row:
                            <div class="method-item">
                                 <input type="radio" name="method-select-T001" id="method-T001-M1" value="M1" data-task-id="T001" data-method-index="0">
                                 <input type="text" class="method-name-input" value="Brush/Roll">
                                 <input type="number" class="method-rate-input" value="200">
                                 <span>SF/HR</span>
                                 <button class="delete-method-btn">X</button>
                            </div>
                             -->
                        </div>
                        <button class="add-method-btn" data-task-id="T001">+ Add Method</button>
                    </div>
                    <!-- *** END NEW SECTION *** -->

                    <div class="factor-edit-panel" id="factor-edit-panel-T001" style="display: none;">
                         <!-- Factor editor content -->
                    </div>
                </div>
                 -->
            </div>
             <button id="add-task-btn">+ Add New Task</button>
        </div>

        <!-- Project Inputs (Not Saved in Config) -->
        <div class="section">
            <h2>Project Details (For Estimation Only)</h2>
            <div>
                <label for="project-area">Project Area (SF):</label>
                <input type="number" id="project-area" value="100" min="0">
            </div>
            <div>
                <label for="labor-rate">Hourly Labor Rate ($):</label>
                <input type="number" id="labor-rate" value="50" min="0" step="0.01">
            </div>
        </div>

        <!-- Outputs -->
        <div class="section results">
            <h2>Estimated Results</h2>
            <p>Final Production Rate: <strong id="final-rate">N/A</strong> SF/HR</p>
            <p>Estimated Time to Complete: <strong id="total-time">N/A</strong> Hours</p>
            <p>Estimated Labor Cost: $<strong id="total-cost">N/A</strong></p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
